import { Context, Devvit, JSONObject, useForm, useInterval, useState } from "@devvit/public-api";
import { UserData } from "../../types.js";
import { CustomButton } from "../CustomButton.js";
import Settings from '../../Settings.json';
import { splitArray } from "../../utils/utils.js";
import { PixelText } from "../PixelText.js";
import { ProgressBar } from "../ProgressBar.js";

interface CelebPageProps {
  onComplete: (score: number) => void;
  onCancel: () => void;
  userData: UserData | null;
}

interface CelebQuestion extends JSONObject {
  image: string;
  name: string;
  hint: string;
  redditRelevance: string;
}

interface drawData {
    color: number;
    drawn: boolean;
    [key: string]: any;
  }
  


export const CelebPage = (
  props: CelebPageProps,
  context: Context
): JSX.Element => {
  const { onComplete, onCancel, userData } = props;
  
  // Sample celebrity questions
  const [questions] = useState<CelebQuestion[]>([
    {
      image: "keanu.jpg",
      name: "Keanu Reeves",
      hint: "Known for 'The Matrix' and 'John Wick'",
      redditRelevance: "Reddit's favorite wholesome celebrity"
    },
    {
      image: "rick-astley.jpg",
      name: "Rick Astley",
      hint: "Never gonna give you up...",
      redditRelevance: "Rickrolled the internet and has a famous Reddit AMA"
    },
    {
      image: "elon-musk.jpg",
      name: "Elon Musk",
      hint: "CEO of Tesla and SpaceX",
      redditRelevance: "Frequently discussed across Reddit, particularly in tech subreddits"
    },
    {
      image: "arnold.jpg",
      name: "Arnold Schwarzenegger",
      hint: "I'll be back",
      redditRelevance: "Active Reddit user who often comments in fitness subreddits"
    },
    {
      image: "bill-gates.jpg",
      name: "Bill Gates",
      hint: "Microsoft founder and philanthropist",
      redditRelevance: "Regular AMAs and his Reddit Secret Santa participation"
    }
  ]);

  const [currentIndex, setCurrentIndex] = useState(0);

  const [score, setScore] = useState(0);
  const [startTime] = useState(Date.now());
  const drawingTime = Settings.drawTimeEasy || 60;
  const [showResult, setShowResult] = useState(false);
  const [isCorrect, setIsCorrect] = useState(false);

  const [elapsedTime, setElapsedTime] = useState<number>(0);
  const [drawingData, setDrawingData] = useState<drawData[]>(Array(Settings.canvasWidth * Settings.canvasHeight).fill({color: 0, drawn: false}));


  const innerSize = 275;
  const size = '275px';

  const pieceSize: Devvit.Blocks.SizeString = `${innerSize / 16}px`;


  const currentQuestion = questions[currentIndex];


  useInterval(() => {
    setElapsedTime(Date.now() - startTime);
    const remainingTime = drawingTime * 1000 - elapsedTime;
    
    const randomIndex = Math.floor(Math.random() * drawingData.length);
    const randomIndex2 = Math.floor(Math.random() * drawingData.length);

    const newDrawingData = [...drawingData];
    newDrawingData[randomIndex].drawn = true;
    newDrawingData[randomIndex2].drawn = true;
    
    setDrawingData(newDrawingData);
     

    if (remainingTime <= 0) props.onComplete(score);
  }, 250).start();



  const handleSubmit = (name:string) => {
    // Clean up and normalize the input for comparison
    const cleanedInput = name.trim().toLowerCase();
    const cleanedAnswer = currentQuestion.name.toLowerCase();
    
    // Check if the answer is correct
    const correct = cleanedInput === cleanedAnswer || 
                   cleanedAnswer.includes(cleanedInput) || 
                   cleanedInput.includes(cleanedAnswer);
    
    setIsCorrect(correct);
    if (correct) {
      setScore(score + 1);
    }
    
    setShowResult(true);
  };

  

 

  const pixels = drawingData.map((pixel, index) => (

    <>
    <hstack
      height={pieceSize}
      width={pieceSize}
      backgroundColor={
        pixel.drawn === true ? "transparent" : "black" 
      }

    > 
    </hstack>
    </>
  ));

  const grid = (
    <vstack height={size} width={size} padding="none">
      {splitArray(pixels, 16).map((row) => (
        <hstack>{row}</hstack>
      ))}
    </vstack>
  );


  

const myForm = useForm(
  () => {
    return {
      fields: [
        {
          type: 'string',
          name: 'answer',
          label: 'Name a Celebrity',
        },
      ],
 
    } 
  },
  (values) => {
    handleSubmit(values.name);
  }
);     





  return (
    <vstack width="100%" height="100%" backgroundColor={Settings.theme.background}>
      <hstack width="100%" alignment="middle center">
       <image
                imageHeight={56}
                imageWidth={256}
                width="256px"
                height="128px"
                        url={`data:image/svg+xml,
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 128 64" shape-rendering="crispEdges">
                        <metadata>Made with Pixels to Svg https://codepen.io/shshaw/pen/XbxvNj</metadata>
                        <path stroke="#e74c3c" d="M0 0h256M0 1h256M0 2h256M0 3h256M0 4h256M0 5h256M0 6h81M85 6h102M189 6h67M0 7h81M85 7h100M191 7h65M0 8h79M89 8h95M193 8h2M198 8h58M0 9h79M89 9h95M200 9h56M0 10h79M91 10h92M202 10h54M0 11h79M91 11h94M205 11h51M0 12h79M91 12h24M119 12h66M207 12h49M0 13h79M91 13h24M119 13h65M209 13h47M0 14h79M93 14h18M121 14h63M211 14h45M0 15h79M93 15h18M121 15h62M212 15h44M0 16h79M93 16h14M121 16h62M211 16h45M0 17h79M93 17h14M121 17h63M213 17h43M0 18h79M95 18h10M121 18h63M215 18h41M0 19h79M95 19h10M121 19h63M214 19h42M0 20h81M95 20h10M121 20h65M214 20h42M0 21h81M95 21h10M121 21h67M191 21h2M216 21h40M0 22h81M97 22h6M121 22h16M149 22h41M191 22h2M215 22h41M0 23h81M97 23h6M121 23h16M149 23h41M192 23h1M216 23h40M0 24h81M99 24h2M119 24h12M149 24h39M216 24h40M0 25h81M99 25h2M119 25h12M149 25h38M216 25h40M0 26h53M61 26h20M119 26h8M147 26h40M216 26h40M0 27h53M61 27h20M119 27h8M147 27h39M215 27h41M0 28h55M67 28h14M119 28h4M145 28h41M212 28h1M215 28h41M0 29h55M67 29h14M119 29h4M145 29h41M212 29h44M0 30h55M75 30h6M145 30h20M173 30h14M209 30h47M0 31h55M75 31h6M145 31h20M173 31h14M204 31h1M207 31h49M0 32h59M75 32h6M143 32h16M173 32h15M197 32h1M204 32h52M0 33h59M75 33h6M143 33h16M173 33h15M192 33h3M197 33h3M201 33h55M0 34h61M143 34h12M171 34h14M192 34h64M0 35h61M143 35h12M171 35h14M195 35h61M0 36h63M141 36h6M169 36h15M197 36h59M0 37h63M141 37h6M169 37h15M197 37h59M0 38h65M167 38h16M197 38h59M0 39h65M167 39h17M196 39h60M0 40h67M165 40h20M196 40h60M0 41h67M165 41h19M198 41h58M0 42h43M55 42h16M165 42h21M197 42h59M0 43h43M55 43h16M165 43h23M197 43h59M0 44h43M61 44h10M163 44h27M194 44h1M196 44h60M0 45h43M61 45h10M163 45h29M193 45h63M0 46h47M67 46h6M185 46h71M0 47h55M67 47h6M187 47h69M0 48h55M187 48h69M0 49h55M183 49h73M0 50h55M183 50h73M0 51h55M183 51h73M0 52h55M183 52h73M0 53h61M183 53h73M0 54h61M181 54h75M0 55h61M181 55h75M0 56h61M179 56h77M0 57h61M179 57h77M0 58h63M173 58h83M0 59h63M173 59h83M0 60h61M171 60h85M0 61h61M171 61h85M0 62h55M171 62h85M0 63h55M171 63h85M0 64h55M177 64h79M0 65h47M177 65h79M0 66h45M179 66h77M0 67h45M179 67h77M0 68h43M183 68h73M0 69h43M183 69h73M0 70h43M187 70h69M0 71h43M187 71h69M0 72h47M191 72h65M0 73h47M191 73h65M0 74h51M195 74h61M0 75h51M195 75h61M0 76h55M195 76h61M0 77h55M195 77h61M0 78h59M193 78h63M0 79h59M193 79h63M0 80h61M191 80h65M0 81h61M183 81h73M0 82h67M183 82h73M0 83h67M183 83h73M0 84h67M177 84h79M0 85h67M177 85h79M0 86h65M175 86h81M0 87h65M175 87h81M0 88h59M177 88h79M0 89h59M177 89h79M0 90h57M177 90h79M0 91h57M177 91h79M0 92h55M177 92h79M0 93h55M183 93h73M0 94h55M183 94h73M0 95h55M183 95h73M0 96h55M183 96h73M0 97h51M183 97h73M0 98h51M165 98h6M183 98h73M0 99h51M165 99h6M191 99h65M0 100h75M167 100h10M195 100h61M0 101h75M167 101h10M195 101h61M0 102h73M167 102h16M195 102h61M0 103h73M167 103h16M195 103h61M0 104h73M171 104h85M0 105h73M171 105h85M0 106h71M173 106h83M0 107h71M173 107h83M0 108h69M175 108h81M0 109h69M175 109h81M0 110h67M151 110h2M177 110h79M0 111h67M151 111h2M177 111h79M0 112h65M149 112h8M179 112h77M0 113h65M149 113h8M179 113h77M0 114h65M73 114h2M149 114h14M183 114h73M0 115h65M73 115h2M149 115h14M183 115h73M0 116h75M149 116h22M183 116h73M0 117h75M149 117h22M183 117h73M0 118h83M103 118h2M149 118h28M185 118h71M0 119h83M103 119h2M149 119h28M185 119h71M0 120h83M101 120h4M131 120h4M149 120h107M0 121h83M101 121h4M131 121h4M149 121h107M0 122h83M99 122h8M129 122h8M149 122h107M0 123h83M99 123h8M129 123h8M149 123h107M0 124h85M97 124h10M129 124h8M149 124h107M0 125h85M97 125h10M129 125h8M149 125h107M0 126h85M97 126h10M127 126h12M149 126h107M0 127h85M97 127h10M127 127h12M149 127h107M0 128h85M97 128h10M125 128h14M149 128h107M0 129h85M97 129h10M125 129h14M149 129h107M0 130h87M95 130h14M123 130h18M149 130h107M0 131h87M95 131h14M123 131h18M149 131h107M0 132h87M95 132h14M123 132h18M149 132h107M0 133h87M95 133h14M123 133h18M149 133h107M0 134h89M95 134h16M121 134h22M149 134h107M0 135h89M95 135h16M121 135h22M149 135h107M0 136h89M93 136h20M119 136h137M0 137h89M93 137h20M119 137h137M0 138h91M93 138h20M117 138h139M0 139h91M93 139h20M117 139h139M0 140h256M0 141h256M0 142h256M0 143h256" />
                        <path stroke="#3498db" d="M81 6h4M187 6h2M81 7h4M185 7h6M79 8h10M184 8h9M195 8h3M79 9h10M184 9h4M191 9h9M79 10h12M183 10h3M193 10h4M198 10h4M79 11h12M185 11h1M195 11h1M200 11h5M79 12h12M115 12h4M185 12h2M202 12h5M79 13h12M115 13h4M184 13h2M204 13h5M79 14h14M111 14h10M184 14h2M206 14h5M79 15h14M111 15h10M183 15h2M208 15h4M79 16h14M107 16h14M183 16h4M209 16h2M79 17h14M107 17h14M184 17h3M209 17h4M79 18h16M105 18h16M184 18h2M210 18h5M79 19h16M105 19h16M184 19h5M190 19h3M197 19h1M212 19h2M81 20h14M105 20h16M186 20h9M196 20h4M212 20h2M81 21h14M105 21h16M188 21h3M193 21h9M212 21h4M81 22h16M103 22h18M137 22h12M190 22h1M193 22h11M213 22h2M81 23h16M103 23h18M137 23h12M190 23h2M193 23h11M213 23h3M81 24h18M101 24h18M131 24h18M188 24h6M195 24h8M212 24h4M81 25h18M101 25h18M131 25h18M187 25h3M192 25h2M197 25h1M201 25h2M212 25h4M53 26h8M81 26h38M127 26h20M187 26h2M211 26h5M53 27h8M81 27h38M127 27h20M186 27h3M208 27h2M211 27h4M55 28h12M81 28h38M123 28h22M186 28h3M206 28h6M213 28h2M55 29h12M81 29h38M123 29h22M186 29h4M203 29h9M55 30h20M81 30h64M165 30h8M187 30h2M192 30h1M196 30h2M200 30h9M55 31h20M81 31h64M165 31h8M187 31h8M196 31h8M205 31h2M59 32h16M81 32h62M159 32h14M188 32h9M198 32h6M59 33h16M81 33h62M159 33h14M188 33h4M195 33h2M200 33h1M61 34h82M155 34h16M185 34h7M61 35h82M155 35h16M185 35h4M190 35h5M63 36h78M147 36h22M184 36h5M192 36h5M63 37h78M147 37h22M184 37h2M194 37h3M65 38h102M183 38h4M195 38h2M65 39h10M77 39h6M85 39h2M89 39h4M95 39h4M103 39h6M115 39h6M131 39h2M135 39h4M141 39h4M149 39h4M163 39h4M184 39h3M194 39h2M67 40h8M77 40h6M85 40h2M89 40h4M95 40h4M103 40h6M115 40h6M131 40h2M135 40h4M141 40h4M149 40h4M163 40h2M185 40h2M194 40h2M67 41h8M77 41h6M85 41h2M89 41h4M95 41h2M99 41h4M105 41h2M109 41h16M127 41h6M135 41h4M141 41h2M145 41h4M151 41h6M159 41h6M184 41h4M193 41h5M43 42h12M71 42h4M77 42h6M85 42h2M89 42h4M95 42h2M99 42h4M105 42h2M109 42h16M127 42h6M135 42h4M141 42h2M145 42h4M151 42h6M159 42h6M186 42h5M193 42h4M43 43h12M71 43h4M77 43h2M81 43h2M85 43h2M95 43h2M99 43h4M105 43h4M113 43h12M127 43h6M141 43h2M151 43h6M159 43h6M188 43h9M43 44h18M71 44h4M77 44h2M81 44h2M85 44h2M95 44h2M99 44h4M105 44h4M113 44h12M127 44h6M141 44h2M151 44h6M159 44h4M190 44h4M195 44h1M43 45h18M71 45h4M79 45h2M85 45h2M89 45h4M95 45h2M99 45h4M105 45h8M115 45h10M127 45h6M135 45h4M141 45h2M145 45h4M151 45h6M159 45h4M192 45h1M47 46h20M73 46h2M79 46h2M85 46h2M89 46h4M95 46h2M99 46h4M105 46h8M115 46h10M127 46h6M135 46h4M141 46h2M145 46h4M151 46h6M159 46h26M55 47h12M73 47h2M77 47h6M85 47h2M89 47h4M95 47h4M103 47h4M113 47h12M127 47h6M135 47h4M141 47h2M145 47h4M151 47h6M159 47h28M55 48h20M77 48h6M85 48h2M89 48h4M95 48h4M103 48h4M113 48h12M127 48h6M135 48h4M141 48h2M145 48h4M151 48h6M159 48h28M55 49h19M164 49h19M55 50h19M164 50h19M55 51h19M164 51h19M55 52h19M164 52h19M61 53h13M164 53h19M61 54h13M164 54h17M61 55h13M164 55h17M61 56h13M164 56h15M61 57h13M164 57h15M63 58h11M164 58h9M63 59h11M164 59h9M61 60h13M164 60h7M61 61h13M164 61h7M55 62h19M164 62h7M55 63h19M164 63h7M55 64h19M164 64h13M47 65h27M164 65h13M45 66h29M164 66h15M45 67h29M164 67h15M43 68h31M164 68h19M43 69h31M164 69h19M43 70h31M164 70h23M43 71h31M164 71h23M47 72h27M164 72h27M47 73h27M164 73h27M51 74h23M164 74h31M51 75h23M164 75h31M55 76h19M164 76h31M55 77h19M164 77h31M59 78h15M164 78h29M59 79h15M164 79h29M61 80h13M164 80h27M61 81h13M164 81h19M67 82h7M164 82h19M67 83h7M164 83h19M67 84h7M164 84h13M67 85h7M164 85h13M65 86h9M164 86h11M65 87h9M164 87h11M59 88h15M164 88h13M59 89h15M164 89h13M57 90h17M164 90h13M57 91h17M164 91h13M55 92h19M164 92h13M55 93h19M164 93h19M55 94h19M164 94h19M55 95h19M164 95h19M55 96h19M164 96h19M51 97h27M84 97h2M88 97h4M94 97h2M102 97h4M112 97h4M124 97h2M132 97h4M142 97h4M152 97h2M164 97h19M51 98h25M78 98h8M88 98h4M94 98h2M98 98h4M104 98h2M108 98h4M114 98h2M118 98h8M128 98h4M134 98h2M138 98h4M144 98h4M150 98h8M160 98h5M171 98h12M51 99h25M78 99h8M88 99h4M94 99h2M98 99h4M104 99h2M108 99h4M114 99h2M118 99h8M128 99h4M134 99h2M138 99h4M144 99h4M150 99h8M160 99h5M171 99h20M75 100h3M82 100h4M88 100h4M94 100h2M102 100h4M112 100h4M122 100h4M128 100h4M134 100h2M138 100h4M144 100h4M150 100h8M160 100h7M177 100h18M75 101h3M82 101h4M88 101h4M94 101h2M102 101h4M112 101h4M122 101h4M128 101h4M134 101h2M138 101h4M144 101h4M150 101h8M160 101h7M177 101h18M73 102h9M84 102h2M88 102h4M94 102h2M98 102h4M104 102h2M108 102h2M112 102h4M118 102h8M128 102h4M134 102h2M138 102h4M144 102h4M150 102h8M160 102h7M183 102h12M73 103h9M84 103h2M88 103h4M94 103h2M98 103h4M104 103h2M108 103h2M112 103h4M118 103h8M128 103h4M134 103h2M138 103h4M144 103h4M150 103h8M160 103h7M183 103h12M73 104h3M82 104h6M92 104h4M102 104h4M108 104h4M114 104h2M124 104h2M132 104h4M142 104h4M152 104h6M160 104h11M73 105h3M82 105h6M92 105h4M102 105h4M108 105h4M114 105h2M124 105h2M132 105h4M142 105h4M152 105h6M160 105h11M71 106h102M71 107h102M69 108h106M69 109h106M67 110h84M153 110h24M67 111h84M153 111h24M65 112h84M157 112h22M65 113h84M157 113h22M65 114h8M75 114h74M163 114h20M65 115h8M75 115h74M163 115h20M75 116h74M171 116h12M75 117h74M171 117h12M83 118h20M105 118h44M177 118h8M83 119h20M105 119h44M177 119h8M83 120h18M105 120h26M135 120h14M83 121h18M105 121h26M135 121h14M83 122h16M107 122h22M137 122h12M83 123h16M107 123h22M137 123h12M85 124h12M107 124h22M137 124h12M85 125h12M107 125h22M137 125h12M85 126h12M107 126h20M139 126h10M85 127h12M107 127h20M139 127h10M85 128h12M107 128h18M139 128h10M85 129h12M107 129h18M139 129h10M87 130h8M109 130h14M141 130h8M87 131h8M109 131h14M141 131h8M87 132h8M109 132h14M141 132h8M87 133h8M109 133h14M141 133h8M89 134h6M111 134h10M143 134h6M89 135h6M111 135h10M143 135h6M89 136h4M113 136h6M89 137h4M113 137h6M91 138h2M113 138h4M91 139h2M113 139h4" />
                        <path stroke="#f1c40f" d="M188 9h3M186 10h7M197 10h1M186 11h9M196 11h4M187 12h15M186 13h18M186 14h20M185 15h23M187 16h22M187 17h22M186 18h24M189 19h1M193 19h4M198 19h14M195 20h1M200 20h12M202 21h10M204 22h9M204 23h9M194 24h1M203 24h9M190 25h2M194 25h3M198 25h3M203 25h9M189 26h22M189 27h19M210 27h1M189 28h17M190 29h13M189 30h3M193 30h3M198 30h2M195 31h1M189 35h1M189 36h3M186 37h8M187 38h8M75 39h2M83 39h2M87 39h2M93 39h2M99 39h4M109 39h6M121 39h10M133 39h2M139 39h2M145 39h4M153 39h10M187 39h7M75 40h2M83 40h2M87 40h2M93 40h2M99 40h4M109 40h6M121 40h10M133 40h2M139 40h2M145 40h4M153 40h10M187 40h7M75 41h2M83 41h2M87 41h2M93 41h2M97 41h2M103 41h2M107 41h2M125 41h2M133 41h2M139 41h2M143 41h2M149 41h2M157 41h2M188 41h5M75 42h2M83 42h2M87 42h2M93 42h2M97 42h2M103 42h2M107 42h2M125 42h2M133 42h2M139 42h2M143 42h2M149 42h2M157 42h2M191 42h2M75 43h2M79 43h2M83 43h2M87 43h8M97 43h2M103 43h2M109 43h4M125 43h2M133 43h8M143 43h8M157 43h2M75 44h2M79 44h2M83 44h2M87 44h8M97 44h2M103 44h2M109 44h4M125 44h2M133 44h8M143 44h8M157 44h2M75 45h4M81 45h4M87 45h2M93 45h2M97 45h2M103 45h2M113 45h2M125 45h2M133 45h2M139 45h2M143 45h2M149 45h2M157 45h2M75 46h4M81 46h4M87 46h2M93 46h2M97 46h2M103 46h2M113 46h2M125 46h2M133 46h2M139 46h2M143 46h2M149 46h2M157 46h2M75 47h2M83 47h2M87 47h2M93 47h2M99 47h4M107 47h6M125 47h2M133 47h2M139 47h2M143 47h2M149 47h2M157 47h2M75 48h2M83 48h2M87 48h2M93 48h2M99 48h4M107 48h6M125 48h2M133 48h2M139 48h2M143 48h2M149 48h2M157 48h2M78 96h6M86 96h2M92 96h2M96 96h6M106 96h6M116 96h8M126 96h6M136 96h6M146 96h6M154 96h10M78 97h6M86 97h2M92 97h2M96 97h6M106 97h6M116 97h8M126 97h6M136 97h6M146 97h6M154 97h10M76 98h2M86 98h2M92 98h2M96 98h2M102 98h2M106 98h2M112 98h2M116 98h2M126 98h2M132 98h2M136 98h2M142 98h2M148 98h2M158 98h2M76 99h2M86 99h2M92 99h2M96 99h2M102 99h2M106 99h2M112 99h2M116 99h2M126 99h2M132 99h2M136 99h2M142 99h2M148 99h2M158 99h2M78 100h4M86 100h2M92 100h2M96 100h6M106 100h6M116 100h6M126 100h2M132 100h2M136 100h2M142 100h2M148 100h2M158 100h2M78 101h4M86 101h2M92 101h2M96 101h6M106 101h6M116 101h6M126 101h2M132 101h2M136 101h2M142 101h2M148 101h2M158 101h2M82 102h2M86 102h2M92 102h2M96 102h2M102 102h2M106 102h2M110 102h2M116 102h2M126 102h2M132 102h2M136 102h2M142 102h2M148 102h2M158 102h2M82 103h2M86 103h2M92 103h2M96 103h2M102 103h2M106 103h2M110 103h2M116 103h2M126 103h2M132 103h2M136 103h2M142 103h2M148 103h2M158 103h2M76 104h6M88 104h4M96 104h6M106 104h2M112 104h2M116 104h8M126 104h6M136 104h6M146 104h6M158 104h2M76 105h6M88 105h4M96 105h6M106 105h2M112 105h2M116 105h8M126 105h6M136 105h6M146 105h6M158 105h2" />
                        <path stroke="#000000" d="M74 49h90M74 50h90M74 51h90M74 52h90M74 53h90M74 54h90M74 55h90M74 56h90M74 57h90M74 58h90M74 59h6M154 59h10M74 60h6M154 60h10M74 61h6M154 61h10M74 62h6M154 62h10M74 63h6M154 63h10M74 64h6M154 64h10M74 65h6M85 65h27M154 65h10M74 66h6M85 66h27M154 66h10M74 67h6M154 67h10M74 68h6M154 68h10M74 69h6M154 69h10M74 70h6M84 70h61M154 70h10M74 71h6M84 71h61M154 71h10M74 72h6M154 72h10M74 73h6M154 73h10M74 74h6M154 74h10M74 75h6M84 75h60M154 75h10M74 76h6M84 76h60M154 76h10M74 77h6M154 77h10M74 78h6M154 78h10M74 79h6M84 79h62M154 79h10M74 80h6M84 80h62M154 80h10M74 81h6M154 81h10M74 82h6M154 82h10M74 83h6M154 83h10M74 84h6M154 84h10M74 85h6M154 85h10M74 86h6M154 86h10M74 87h90M74 88h90M74 89h90M74 90h90M74 91h90M74 92h90M74 93h90M74 94h90M74 95h90M74 96h4M84 96h2M88 96h4M94 96h2M102 96h4M112 96h4M124 96h2M132 96h4M142 96h4M152 96h2" />
                        <path stroke="#ffffff" d="M80 59h74M80 60h74M80 61h74M80 62h74M80 63h74M80 64h74M80 65h5M112 65h42M80 66h5M112 66h42M80 67h74M80 68h74M80 69h74M80 70h4M145 70h9M80 71h4M145 71h9M80 72h74M80 73h74M80 74h74M80 75h4M144 75h10M80 76h4M144 76h10M80 77h74M80 78h74M80 79h4M146 79h8M80 80h4M146 80h8M80 81h74M80 82h74M80 83h74M80 84h74M80 85h74M80 86h74" />
                        </svg>                    
                        `}
            />
        </hstack>
      
      
      <vstack alignment="center middle" >

        <ProgressBar width={256} onComplete={onCancel} />
      </vstack>
      
      <spacer size="medium" />
      
      
      <vstack alignment="middle center" width="100%">
        <zstack width="250px" height="250px">
            <image
                imageHeight={512}
                imageWidth={512}
                height={size}
                width={size}
                url="grid-template.png"
            />
          {grid}
        </zstack>
        
        
        <spacer size="medium" />
        
          <vstack gap="medium" width="80%" alignment="middle center">
            
            
            <hstack gap="medium">
              <CustomButton
                width="120px"
                height="40px"
                text="Solve"
                color={Settings.theme.primary}
                onClick={()=> context.ui.showForm(myForm)}
              />
            </hstack>
          </vstack>
  
   
      </vstack>
    </vstack>
  );
};